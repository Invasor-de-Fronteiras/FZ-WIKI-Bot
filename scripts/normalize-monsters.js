const data = require("./src/assets/data.json");
const fs = require("node:fs");

const newData = [];

const RANK_HITZONE_ORDER = [
  "Standard",
  "HR5",
  "Goushu",
  "G-Rank",
  "1st District",
  "Zenith",
  "Musou",
];

const RANK_ORDER = [
  "HR1-4",
  "HR5",
  "HR5-Goushu",
  "HR5-Exotic",
  "HR5-Supremacy",
  "Supremacy (HR6)",
  "G-Rank",
  "G-Rank-Exotic",
  "G-Rank-Conquest",
  "G-Rank-Road",
  "Road and Tower",
  "Conquest",
  "Zenith",
  "Musou",
];

const PART_ORDER = [
  "Horn",
  "Head",
  "Eyes",
  "Inside Mouth",
  "Tongue",
  "Fangs",
  "Face",
  "Neck",
  "Shoulder",
  "Arms",
  "Claw",
  "Claws",
  "L.Claw",
  "R.Claw",
  "Tentacles",
  "Body/Arms",
  "Body",
  "Chest",
  "Belly",
  "Core",
  "Core/Inside Shell",
  "Feelers",
  "Wings",
  "Wingspikes",
  "Wing Claw",
  "Wing Claws",
  "Wingclaw",
  "Wing Blades",
  "Wing Membrane",
  "Wing Talon",
  "Wing/Tail Tip",
  "Back",
  "Shell",
  "Spine",
  "Spines",
  "Back/Tail",
  "L.Leg/Belly",
  "Top of Legs",
  "Legs",
  "Forelegs/Hindlegs",
  "L.Leg",
  "R.Leg",
  "Forelegs",
  "Hindlegs",
  "R.Foreleg",
  "L.Foreleg",
  "L.Forelegs",
  "R.Forelegs",
  "L.Hindleg",
  "R.Hindleg",
  "L.Hindlegs",
  "R.Hindlegs",
  "Entirely",
  "Tail",
  "Tail ",
  "Tail Tip",
  "Tail Armour",
  "Ice Tail",
  "Tail Apex",
  "Sub Tails",
  "Tail (?)",
  "Crystal",
  "？？",
  "-",
];

const MOMENT_ORDER = [
  ...RANK_ORDER,
  "Standard",
  "Rage",
  "Rage 1",
  "Rage 2",
  "Rage 3",
  "During Suction Start",
  "Broken Chest",
  "Part Broken",
  "Chest Puffed Out",
  "Invisible",
  "Armour Mode (From 50～20% HP)",
  "Guarding",
  "Guarding (Claw Broken)",
  "Spinning Attack",
  "Charging",
  "Counter: Damage x4",
  "Counter: Damage x4 Tail (?)",
  "1x Break",
  "2x Break",
  "Flipped",
  "Roaring",
  "Wind Cloak",
  "Flame Cloak",
  "Full",
  "Resistance Build Up",
  "Magnetised",
  "Shell Broken",
  "Orange Shell",
  "Blue Shell",
  "HR5",
  "HR5 Rage",
  "HR5 During Suction Start",
  "HR5 Broken Chest",
  "HR5 Chest Puffed Out",
  "HR5 Guarding",
  "HR5 Guarding (Claw Broken)",
  "HR5 Spinning Attack",
  "HR5 2x Break",
  "HR5 1x Break",
  "HR5 Flipped",
  "HR5 Flame Cloak",
  "HR5 Charging",
  "HR5 Shell Broken",
  "Goushu",
  "Gou Rage",
  "Gou Rage 1",
  "Gou Rage 2",
  "Gou Rage 3",
  "Gou Part Broken",
  "Gou Invisible",
  "Gou Counter: Damage x4",
  "Gou Counter: Damage x4 Tail (?)",
  "Gou Roaring",
  "Gou Wind Cloak",
  "Gou Rage 2 (Ray Killed)",
  "Gou Full",
  "Gou Magnetised",
  "Gou Orange Shell",
  "Gou Blue Shell",
  "Fluid Stored",
  "Bleeding Tongue",
  "Readying to Attack",
  "Outer Shell Broken",
  "Frenzy",
  "Second Form",
  "Second Form (Rage)",
  "Exposed Flesh",
  "Armoured",
  "Thunder Cloak",
  "Target Found",
  "Target Found (Rage)",
  "Dragon Cloak",
  "Head Broken",
  "Standard Thunder Clad",
  "Red Flames",
  "Purple Flames",
  "肉質(紅葉)",
  "Red Barrier Up",
  "Adapted to Cutting",
  "Adapted to Impact",
  "Adapted to Shots",
  "Supremacy",
  "Supremacy Flame Cloak",
  "After Ressurection (Supremacy)",
  "Rage After Ressurection (Supremacy)",
  "Phase 1",
  "Phase 2",
  "Phase 3",
  "Phase 4",
  "Phase 5",
  "Phase 6 (Supremacy) / Variant Only",
  "G-Rank",
  "G Rage",
  "G Rage 1",
  "G Rage 2",
  "G Rage 3",
  "G During Suction Start",
  "G Bleeding Tongue",
  "G Fluid Stored",
  "G Part Broken",
  "G Broken Chest",
  "G Invisible",
  "G Chest Puffed Out",
  "G-Rank (Shiten)",
  "G Guarding",
  "G Guarding (Claw Broken)",
  "G Readying to Attack",
  "G Outer Shell Broken",
  "Awakened",
  "G Spinning Attack",
  "Blue Flames",
  "Blue Flames Charging",
  "G Counter: Damage x4",
  "G Counter: Damage x4 Tail (?)",
  "G Frenzy",
  "True Frenzy",
  "肉質(難関)",
  "肉質(難関) (?)",
  "G Exposed Flesh",
  "G Armoured",
  "G 1x Break",
  "G 2x Break",
  "G Flipped",
  "G Thunder Cloak",
  "G Roaring",
  "Ice Clad",
  "Ice Clad (Rage)",
  "G Wind Cloak",
  "G Rage 2 (Ray Killed)",
  "G Flame Cloak",
  "G-Rank Normal/Searching",
  "G-Rank Target Found",
  "G-Rank Target Found (Rage)",
  "Power Mode (Red)",
  "Hybrid Mode (White)",
  "Speed Mode (Blue)",
  "Crystal Mode",
  "Ranged Mode (Dark Green)",
  "肉質(弾跳ね返し時)",
  "肉質()",
  "G Charging",
  "肉質() (?)",
  "肉質() (?²)",
  "肉質() (?³)",
  "G Full",
  "Climbable",
  "Climbable (Resistance Build Up)",
  "Toppled",
  "Toppled (Resistance Build Up)",
  "G Magnetised",
  "G Shell Broken",
  "G Dragon Cloak",
  "G Flame Cloak",
  "G Thunder Clad",
  "G Phase 1",
  "G Phase 2",
  "G Phase 4",
  "G Phase 5",
  "G Phase 3",
  "G Phase 6",
  "G Phase 7",
  "瘴気発生中",
  "G Head Broken",
  "G Purple Flames",
  "G Red Flames",
  "G-Rank (Hunter's Road)",
  "Awakened (From 50～20% HP)",
  "G Adapted to Cutting",
  "G Adapted to Impact",
  "G Adapted to Shots",
  "Counter Prep",
  "1st District",
  "2nd District",
  "Zenith",
  "Part destroyed or after triggering a blast",
  "Z Rage",
  "Z Bleeding Tongue",
  "Z Fluid Stored",
  "Broken Claw",
  "Sand Cloak",
  "Sand Cloak (Broken Claw)",
  "Z Guarding",
  "Sand Cloak Guarding",
  "Sand Cloak Guarding (Broken Claw)",
  "Z Rage 1",
  "Z Rage 2",
  "Z Rage 3",
  "Z Broken Chest Stage 1",
  "Z Broken Chest Stage 2",
  "Z Broken Chest Stage 3",
  "Z Exposed Flesh",
  "Z Armoured",
  "Z Roaring",
  "Z Thunder Clad",
  "Z 1x Break",
  "Z 2x Break",
  "Z Flipped",
  "Musou",
];

const sortedByArr = (keys, arr) => keys.sort((a, b) => arr.indexOf(a) - arr.indexOf(b));

const sortedKeys = (obj, arr) => sortedByArr(Object.keys(obj), arr);

data.sort((a, b) => a.id - b.id);

for (const m of data) {
  const n = { ...m, ranks: sortedByArr(m.ranks, RANK_ORDER), hitzones: {} };

  for (const i of sortedKeys(m.hitzones, RANK_HITZONE_ORDER)) {
    n.hitzones[i] = {};

    for (const j of sortedKeys(m.hitzones[i], MOMENT_ORDER)) {
      n.hitzones[i][j] = {};

      for (const x of sortedKeys(m.hitzones[i][j], PART_ORDER)) {
        n.hitzones[i][j][x] = { ...m.hitzones[i][j][x] };
      }
    }
  }

  newData.push(n);
}

fs.writeFileSync("./new-data.json", JSON.stringify(newData), { encoding: "utf-8" });
